@(user: User, allDrugs: List[Drug], missingDrugs: List[Drug], searchForm: Form[Drug])
@import helper._
@main("Pharmacy | Home") {
	
	<h1>Pharmacy</h1>
	<p>
		Hello, @user.name! (@user.role) | 
		<a href="@routes.Application.logout()">Logout</a>
	</p>
    
	<h1>Drugs</h1>
	@if(flash.contains("success")) {
		<p class="success">
			@flash.get("success")
		</p>
	}
	
	@if(flash.contains("error")) {
		<p class="error">
			@flash.get("error")
		</p>
	}
	
    <p><a href="@routes.Drugs.create()">Add new drug</a></p>
    <p><a href="@routes.Application.orderMissingDrugs()">Order missing drugs</a></p>
    
    <h2>Search</h2>
    <form method="POST" action="@routes.Drugs.search()" >
        <input type="text" name="key" placeholder="Enter name or ingredient" />
        <input type="submit" value="Search" />
    </form>
    
    <h2>All drugs</h2>
    @if(allDrugs.size() <= 0) {
		<p>No drugs</p>
	} else {
		<ol>
			@for(drug <- allDrugs) {
				<li>
					<a href="@routes.Drugs.show(drug.id)"><p>Name: @drug.name</p></a>
					<p>Id: @drug.id</p>
					<p>Description: @drug.description</p>
					<p>Active ingredient: @drug.activeIngredient</p>
					<p>Price: @drug.price</p>
					<p>Quantity: @drug.quantity</p>
					<p>Is prescribed: @drug.isPrescribed</p>
				</li>
				<p>
					<a href="@routes.Drugs.delete(drug.id)">Delete</a>
					<a href="@routes.Drugs.edit(drug.id)">Edit</a>
				</p>
			}
		</ol>
	}
	
	<h2>Missing drugs</h2>
	@if(missingDrugs.size() <= 0) {
		<p>No missing drugs</p>
	} else {
		<ol>
			@for(drug <- missingDrugs) {
				<li>
					<a href="@routes.Drugs.show(drug.id)"><p>Name: @drug.name</p></a>
					<p>Id: @drug.id</p>
					<p>Description: @drug.description</p>
					<p>Active ingredient: @drug.activeIngredient</p>
					<p>Price: @drug.price</p>
					<p>Quantity: @drug.quantity</p>
					<p>Is prescribed: @drug.isPrescribed</p>
				</li>	
			}
		</ol>
	}
	
    
}
